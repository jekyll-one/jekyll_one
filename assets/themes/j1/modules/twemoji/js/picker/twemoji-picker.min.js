/*
 # -----------------------------------------------------------------------------
 # ~/assets/themes/j1/modules/twemoji/js/picker/twemoji-picker.min.js
 # Twemoji-Picker v2017-06-03 implementation for J1 template
 #
 # Product/Info:
 # https://jekyll.one
 # https://github.com/xLs51/Twemoji-Picker
 #
 # Copyright (C) 2021 Juergen Adams
 # Copyright (C) 2015 xLs51
 #
 # J1 Template is licensed under the MIT License.
 # See: https://github.com/jekyll-one-org/J1 Template/blob/master/LICENSE
 # Twemoji-Picker is licensed under under the MIT License.
 # For details, https://github.com/xLs51/Twemoji-Picker
 # -----------------------------------------------------------------------------
*/
(function(i,g,k){var c=150;var j={};var e="/assets/data/twa_v1.json";i.TwemojiPicker=function(b,a){var d=this;i.when(this._loadDatabase()).done(function(f){d.$el=i(b);d._init(a)})};i.TwemojiPicker.defaults={init:null,size:25,icon:"grinning",iconSize:25,height:100,width:null,category:["smile","cherry-blossom","video-game","oncoming-automobile","symbols"],categorySize:20,pickerPosition:null,pickerHeight:150,pickerWidth:null,placeholder:"",};i.TwemojiPicker.prototype={_init:function(a){this.options=i.extend(true,{},i.TwemojiPicker.defaults,a);this._initPicker();this._initCategory();this._initTwemoji();this._initText();this._initStyle();this._initEvents()},_loadDatabase:function h(){return i.ajax({url:e,success:function(a){if(typeof a=="string"){j=JSON.parse(a)}if(typeof a=="object"){j=a}}})},_initPicker:function(){var a=this;a.$id="#"+a.$el["0"].id;a.$pickerHeigth=a.options.height.replace("px","");a.$pickerHeigth=Number(a.$pickerHeigth);a.$wrapper=a.$el.wrap('<div class="twemoji-wrap"></div>').parent();a.$wrapper.append('<div class="twemoji-textarea" contentEditable="true" placeholder="'+a.options.placeholder+'"></div>');a.$wrapper.append('<div class="twemoji-textarea-duplicate"></div>');a.$wrapper.append('<div class="twemoji-icon-picker"><span id="open-group" class="mr-2" style="width: 2rem; height: 2rem;"><button type="button" name="open-group" class="btn btn-raised btn-flex btn-primary mr-2"><i class="toggle-button mdi mdi-lg mr-1 mdi-toggle-switch-off"></i> Picker <div class="ripple-container"></div></button></span><span id="clear-textarea" style="width: 2rem; height: 2rem;"><button type="button" name="clear-textarea" class="btn btn-raised btn-flex btn-primary"><i class="mdi mdi-close mdi-lg mr-1"></i> Clear </button></span></div>');a.$wrapper.append('<div class="twemoji-picker"></div>');a.$el.hide();a.$textarea=a.$wrapper.find(".twemoji-textarea");a.$textareaDuplicate=a.$wrapper.find(".twemoji-textarea-duplicate").hide();a.$iconPicker=a.$wrapper.find("#open-group");a.$clearTextarea=a.$wrapper.find("#clear-textarea");a.$picker=a.$wrapper.find(".twemoji-picker").hide()},_initCategory:function(){var b=this;var a=this.options.category;this.categoryName=["people","nature","object","place","symbol"];this.$picker.append('<div class="twemoji-picker-category"></div>');this.$pickerCategory=this.$picker.find(".twemoji-picker-category");i.each(this.categoryName,function(f,d){b.$pickerCategory.append('<span data-category="'+d+'">'+b.imageFromName(a[f])+"</span>")});this.$pickerCategory.find("span:first").addClass("active")},_initTwemoji:function(){var a=this;i.each(this.categoryName,function(d,b){a.$picker.append('<div class="twemoji-list '+b+'"></div>');i.each(j,function(m,f){if(f.category===b){a.$wrapper.find(".twemoji-picker ."+b).append('<span><img class="emoji" draggable="false" src="'+f.base64+'" alt="'+f.value+'" title="'+f.name+'"></span>')}})});this.$twemojiList=this.$picker.find(".twemoji-list");this.$twemojiList.not(":first").hide()},_initText:function(){if(this.options.init){var a=this.options.init;var b=/:([\w-]+):/g;var d;while(d==b.exec(a)){a=a.replace(d[0],this.imageFromName(d[1],true))}this.$textarea.html(a);this.copyTextArea(this.$textarea.html())}},_initStyle:function(){this.$wrapper.css({width:this.options.width?this.options.width:"100%",height:this.options.height?this.options.height:"",});this.$wrapper.find("img").css({width:this.options.size,height:this.options.size,});this.$iconPicker.css({width:this.options.iconSize,height:this.options.iconSize,});this.$pickerCategory.find("img").css({width:this.options.categorySize,height:this.options.categorySize,});this.$twemojiList.css({width:this.options.pickerWidth?this.options.pickerWidth:"100%",height:this.options.pickerHeight,});this.$picker.css({width:this.options.pickerWidth?this.options.pickerWidth:"100%",top:this.options.pickerPosition==="top"?"-"+this.$picker.outerHeight()+"px":"",})},_initEvents:function(){var a=this;this.$textarea.on("keyup",function(){a.copyTextArea(i(this).html())});this.$iconPicker.on("click",function(){var b=i(".twemoji-picker").height()+c;i("#picker").height(b);i(".toggle-button").toggleClass("mdi-toggle-switch-off mdi-toggle-switch");if(!a.openedPicker){a.openPicker()}else{a.closePicker();i("#picker").height(a.$pickerHeigth)}});this.$clearTextarea.on("click",function(){a.copyTextArea("");i(a.$id).val("");i(".twemoji-textarea > .emoji-span").remove()});this.$pickerCategory.find("span").on("click",function(){var b=i(this).data("category");a.openCategory(i(this),b)});this.$pickerCategory.find(".close").on("click",function(){if(a.openedPicker){a.closePicker()}});this.$twemojiList.find("img").on("click",function(){a.copyTwemoji(i(this))})},copyText:function(d){var b=document.createElement("textarea");b.setAttribute("style","position:fixed;opacity:0;top:100px;left:100px;");b.value=d;document.body.appendChild(b);b.select();document.execCommand("copy");var a=document.createElement("div");a.setAttribute("class","copied");a.appendChild(document.createTextNode("Copied to Clipboard"));document.body.appendChild(a);setTimeout(function(){document.body.removeChild(b);document.body.removeChild(a)},1500)},openPicker:function(){this.$picker.show();this.openedPicker=true},closePicker:function(){this.$picker.hide();this.openedPicker=false},openCategory:function(b,a){this.$pickerCategory.find("span").removeClass("active");b.addClass("active");this.$twemojiList.not(".twemoji-picker ."+a).hide();this.$twemojiList.filter(".twemoji-picker ."+a).show()},copyTwemoji:function(a){var f=a.attr("alt");var b=a.attr("src");var d=a.attr("title");var m="emoji:"+d+"[]";this.copyText(m);this.$textarea.focus();this.pasteAtCursor('<span class="emoji-span"><img class="emoji" src="'+b+'" title="'+d+'" alt="'+f+'" width="'+this.options.size+'" height="'+this.options.size+'"> '+m+"</span> ");this.copyTextArea(this.$textarea.html())},copyTextArea:function(a){var d=this.$textareaDuplicate.html(a);d.find("img").replaceWith(function(){return this.alt});var b=d.html();this.$el.text(b)},imageFromName:function(b,a){var d=i.grep(j,function(f){return f.name==b});if(a){return'<img class="emoji" src="'+d[0].base64+'" alt="'+d[0].value+'" width="'+this.options.size+'" height="'+this.options.size+'">'}return'<img class="emoji" draggable="false" src="'+d[0].base64+'" alt="'+b+'">'},pasteAtCursor:function(a){var b,p;if(g.getSelection){b=g.getSelection();if(b.getRangeAt&&b.rangeCount){p=b.getRangeAt(0);p.deleteContents();var o=document.createElement("div");o.innerHTML=a;var q=document.createDocumentFragment(),d,f;while((d=o.firstChild)){f=q.appendChild(d)}p.insertNode(q);if(f){p=p.cloneRange();p.setStartAfter(f);p.collapse(true);b.removeAllRanges();b.addRange(p)}}}else{if(document.selection&&document.selection.type!="Control"){document.selection.createRange().pasteHTML(a)}}}};i.fn.twemojiPicker=function(a){var b=i.data(this,"twemojiPicker");this.each(function(){b?b._init():b=i.data(this,"twemojiPicker",new i.TwemojiPicker(this,a))});return b}})(jQuery,window);
