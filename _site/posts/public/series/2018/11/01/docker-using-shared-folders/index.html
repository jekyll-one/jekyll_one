



  

      <!DOCTYPE html> <html lang="en"> <head data-proofer-ignore> <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>docker on windows</title> <meta name="description" content="Docker on Windows"> <link rel="icon" type="image/ico" href="/assets/images/modules/icons/j1/j1-32x32.ico"> <meta name="author" content="J1 Team"> <meta name="keywords" content="Jekyll, One, Template, Ruby, Asciidoctor, Asciidoc, Bootstrap, Javascript, JS, JS3, CSS, CSS3, HTML5, Material, Design"> <meta name="robots" content="noindex"> <meta name="robots" content="noindex"> <meta name="robots" content="nofollow"> <link rel="stylesheet" type="text/css" href="/assets/themes/j1/core/css/vendor.min.css" /> <link rel="stylesheet" type="text/css" href="/assets/themes/j1/core/css/globals.min.css" /> <script sync src="/assets/themes/j1/adapter/js/j1.js"></script> <script sync src="/assets/themes/j1/core/js/template.min.js"></script> <script sync src="/assets/themes/j1/adapter/js/logger.js"></script> <script sync src="/assets/themes/j1/adapter/js/attic.js"></script> <script defer src="/assets/themes/j1/adapter/js/themer.js"></script> <script sync src="/assets/themes/j1/adapter/js/navigator.js"></script> <script defer src="/assets/themes/j1/adapter/js/toccer.js"></script> <script defer src="/assets/themes/j1/adapter/js/searcher.js"></script> <script defer src="/assets/themes/j1/adapter/js/cookie_consent.js"></script> <script defer src="/assets/themes/j1/adapter/js/ssm.js"></script> <link rel="stylesheet" type="text/css" href="/assets/themes/j1/extensions/rouge/css/base16/theme.css" /> <script defer src="/assets/themes/j1/extensions/iconify/js/iconify.min.js"></script> <script sync src="/assets/themes/j1/adapter/js/mmenu.js"></script> </head> <body> <div id="no_flicker" style="display: none"> <nav id="ssm-container" class="ssm-btns-right ssm-anim-slide no-r-text"></nav> <div id="navigator_nav_topsearch" class="top-search"> <div class="container-fluid"> <div class="input-group"> <span class="input-group-addon"><i class="mdi mdi-magnify mdi-48px" style="color:#9E9E9E"></i></span> <input type="text" id="jss-input" class="form-control" placeholder="QuickSearch"> <span class="input-group-addon close-search"><i class="mdi mdi-close mdi-48px" style="color:#9E9E9E"></i></span> </div> </div> <div class="row"> <div class="panel-search mr-5 mb-3 ml-5" id="jss-panel" style="display: none"> <div class="panel-heading lead"></div> <div class="panel-body"><p></p></div> <div class="search-list-group mr-5 ml-2"> <ul id="jss-results"></ul> </div> </div> </div> </div> <nav id="navigator_nav_mmenu"></nav> <nav id="navigator_sidebar_mmenu"></nav> <nav id="navigator_toc_mmenu"></nav> <nav id="navigator_nav_navbar" class="navbar navigator navbar-expand-lg navbar-default light navbar-fixed navbar-transparent"> <a id="navbar-brand" class="navbar-brand animated" href="#"> <img src="/assets/images/modules/icons/j1/j1-512x512.png" height="64" alt="One Template"></a> <button id="mmenu-button" type="button" class="navigator navbar-toggler animated fadeIn" data-toggle="collapse" data-target="#navigator_nav_menu" aria-controls="navigator_nav_menu" aria-expanded="false" aria-label="Toggle navigation"> <i class="mdi mdi-menu mdi-36px"></i> </button> <div id="navigator_nav_menu" class="collapse"></div> <div id="navigator_nav_quicklinks" class="attr-nav collapse navbar-collapse justify-content-end"></div> </nav> <div id="authclient_modals" class="authclient_modals"></div> <header id="header"> <div id="image_attic" class="attic"> <div class="container"> <div id="head-title" class="head-title animated"> <h2 id="head-title-text" class="notoc">Using Docker</h2></div> <div id="head-tagline" class="head-tagline animated"> <h3 id="head-tagline-tagline" class="notoc">docker on windows</h3></div> <div class="attic-caption"></div> </div> </div> </header> <div class="container-fluid"> <div class="container mr-5 mb-5"> <div class="row"> <main class="col-md-12 col-xs-12 r-text-300 js-toc-content"> <div class="paginator"> <ul class="pagination raised-z0"> <li class="page-item"><a class="page-link" href="/posts/public/featured/2018/05/01/confusion-about-base-url/" title="Jekyll URLs">Prev</a></li> <script> var cookie_names = j1.getCookieNames(); var user_state_cookie_name = cookie_names.user_session; var user_state = j1.readCookie(user_state_cookie_name); var re = new RegExp('navigator|dateview|tagview|archive'); var last_pager = user_state.last_pager; var last_pager_url; if (re.test(last_pager)) { last_pager_url = '<li class="page-item"><a class="page-link" href="' + last_pager + '" title="Back to Top Page">Back</a></li>'; } else { last_pager_url = '<li class="page-item disabled"><a class="page-link" title="Back to Top Page">Back</a></li>'; } document.write( last_pager_url ); j1.writeCookie({ name: user_state_cookie_name, data: user_state }); </script> <li class="page-item"><a class="page-link" href="/posts/public/featured/2019/05/01/top-open-source-static-site-generators/" title="Site generators">Next</a></li> </ul> </div> <div class="post-headline mt-4"> <h2 id="blog_article_navigator" class="notoc">01 November 2018</h2> </div> <div class="nav bmd-layout-container custom-size-350 bmd-drawer-f-l"> <header class="bmd-layout-header"> <div class="navbar navbar-dark bg-primary raised-z2 mb-4"> <button class="bmd-drawer drawer-toggler animated fadeIn" type="button" data-toggle="drawer" data-target="#post_navigator"> <span class="sr-only">Toggle drawer</span> <span class="mdi mdi-menu mdi-2x"></span> </button> <ul class="nav navbar-nav"> <li class="nav-item"> <span class="navbar-text">Series Navigator: Docker</span> </li> </ul> </div> </header> <script> $('button.drawer-toggler').click(function(){ $('button.drawer-toggler span.mdi').toggleClass('mdi-menu mdi-close'); }); $('button.drawer-toggler').click(function(){ $('button.drawer-toggler').toggleClass('fadeIn rotateIn'); }); </script> <div id="post_navigator" class="bmd-layout-drawer bg-faded"> <span class="navbar-brand mt-2 ml-3" style="font-weight: 500;">DOCKER</span> <div id="post_series"> <div class="series-navigator ml-3"> <div class="content series-navigation"> <div class="row"> <div class="col-xs-12 col-md-12 col-lg-12 mb-4"> <h5 id="blog_series_list" class="notoc mt-2 mr-2 mb-4">This article is <strong>part 1 </strong> in a <strong>1-part</strong> series:</h5> <ul class="side-nav"> <li class="current"><a data-proofer-ignore href="#">2018-11-01 · Part 1 · Using Docker</a></li> </ul> </div> <div class="col-xs-12 col-md-12 col-lg-12 mt-2"> <h5 class="notoc series-exerpt-title">Docker on windows</h5> <div class="series-exerpt mr-3"> <div class="paragraph"> <p><div class="paragraph"> <p>How to run Docker smooth on Windows? Sounds like a quite simple question follwed by a simple answer: go for <strong>Docker for Windows</strong>. Unfortunately, the answer is <strong>not</strong> that easy. As often: it depends (on the use case).</p> </div></p> </div> </div> </div> </div> </div> </div> </div> </div> <main class="bmd-layout-content"> <div class="paragraph"> <p>How to run Docker smooth on Windows? Sounds like a quite simple question follwed by a simple answer: go for <strong>Docker for Windows</strong>. Unfortunately, the answer is <strong>not</strong> that easy. As often: it depends (on the use case).</p> </div> <div class="paragraph clearfix mb-3"> </div> <div class="sect1"> <h2 id="readmore">Docker smooth on Windows</h2> <div class="sectionbody"> <div class="paragraph"> <p>In general, two incarnations of Docker for Windows are available:</p> </div> <div class="ulist"> <ul> <li> <p>Legacy solution: <strong>Docker Toolbox</strong></p> </li> <li> <p>Native solution: <strong>Docker for Windows</strong></p> </li> </ul> </div> <div class="paragraph"> <p>Before the native version of Docker <strong>Docker for Windows</strong> was available, a <strong>cross-platform</strong> solution called <strong>Docker Toolbox</strong> could be used. <strong>Docker Toolbox</strong> is a bundle of <strong>current</strong> Docker software based on <strong>Docker Machine</strong> combined with the <strong>Docker Engine</strong> bundled with <strong>VirtualBox</strong> as a Hypervisor to run Linux boxes as virtual machines on Windows.</p> </div> <div class="paragraph"> <p>What the Docker team recomments: Update to the newer package, if possible. This should be discussed, especially for Windows, in more detail &#8230;&#8203;</p> </div> <div class="admonitionblock warning"> <table> <tr> <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> <td class="content"> <div class="paragraph"> <p><strong>The Docker Team mentions the following about Docker Toolbox:</strong></p> </div> <div class="paragraph"> <p>Docker Toolbox is for <strong>older Windows</strong> systems (or <strong>Apple MacOS</strong> versions) that <strong>does not meet</strong> the requirements of the <strong>native</strong> Docker version.</p> </div> </td> </tr> </table> </div> <div class="paragraph"> <p>Docker won&#8217;t never run <strong>natively</strong> on Windows. The <strong>Container Technology</strong> used by Docker depends on <strong>Linux</strong> (at least on a Unix flavour of the host operating system). For all non-Linux (or Unix) platforms, a <strong>Hypervisor</strong> is needed to make it possible to run the needed <strong>Linux OS</strong> for Docker.</p> </div> <div class="paragraph"> <p>Yes, Windows support a <strong>native</strong> Hypervisor layer: <code>Hyper-V</code>. Using the Windows component <code>Hyper-V</code>, any operating system can be run as <strong>virtual machines</strong> on Windows. But it should be kept in mind: the Hypervisor layer is <strong>always</strong> needed; as well as for the so-called the <strong>native</strong> Docker version on Windows. But: real <strong>native</strong> Docker versions does <strong>not</strong> need a Hypervisor layer; they run containers direcly on the host OS! This should be kept on mind.</p> </div> <div class="paragraph"> <p>They are some pittfals using <strong>Docker for Windows</strong> if you go for:</p> </div> <div class="ulist"> <ul> <li> <p>Stability - found quite often issues running containers on <strong>Docker for Windows</strong>. If you&#8217;re not a Windows specialist, it is hard to findout issues for <code>Hyper-V</code> , the VM and|or both.</p> </li> <li> <p>Flexibility - it is <strong>NOT</strong> possible to use the Hypervisor <code>Hyper-V</code> in parallel to <strong>VirtualBox</strong> as an alternative</p> </li> <li> <p>Incompatibility - on some Windows installations, and for sure they met the requirements of the <strong>native</strong> Docker version, the installaton was <strong>NOT</strong> successful and Docker fails to start</p> </li> </ul> </div> <div class="paragraph"> <p>Again: the software included in the <strong>Docker Toolbox</strong> are <strong>current</strong> versions. The latest Toolbox contains:</p> </div> <div class="ulist"> <ul> <li> <p>the Docker Engine Docker, version 18.03.0-ce, build 0520e24302</p> </li> <li> <p>the Docker Machine, version 0.14.0, build 89b8332</p> </li> <li> <p>the Docker Composer, version 1.20.1, build 5d8c71b2</p> </li> <li> <p>a current MINGW64-based GNU bash, version 4.4.19(2)-release (x86_64-pc-msys)</p> </li> </ul> </div> <div class="paragraph"> <p>For all the people having their (IT) roots on Unix respectively Linux, the <strong>Docker Toolbox</strong> is the better solution on Windows (for now). No need to go for the Windows Hypervisor <code>Hyper-V</code> - Oracle <strong>VirtualBox</strong> can be used instead; as quite often used for testing and development.</p> </div> <div class="paragraph"> <p>Let&#8217;s have a look how to <strong>Manage Linux on Windows</strong>, to use Docker on the Windows platform.</p> </div> </div> </div> <div class="sect1"> <h2 id="installing-docker-toolbox">Installing Docker Toolbox</h2> <div class="sectionbody"> <div class="paragraph"> <p>As discussed ealier, <strong>Docker Toolbox</strong> is using <strong>VirtualBox</strong> for the Hypervisor to create the Linux VMs needed. To get the latest version, install VirtualBox first (Docker Toolbox includes a installer package for VBox but not nessesarily at their latets version).</p> </div> <div class="paragraph"> <p>Go for the <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox Download Page</a> and select under <strong>VirtualBox 5.x.y platform packages</strong> the latest version for Windows (Windows hosts). Install the package - the installation process is quite simple supported by an build in installer wizard.</p> </div> <div class="paragraph"> <p>If done, go for the installation of the Toolbox. A current package can be retrieved from <a href="https://docs.docker.com/toolbox/toolbox_install_windows/">Docker Documents</a>. The page includes all the info needed to install the software.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> For the installation of the <strong>Docker Toolbox</strong>, please deselect the installation of <strong>VirtualBox</strong> included as the software has been already installed. </td> </tr> </table> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> The commandline interface used by <strong>Docker Toolbox</strong> is based on <strong>Git MSYS-git UNIX tools</strong>. If you have <strong>Git</strong> installed already for your Windows host, please deselect the installation of <strong>Git</strong> included. </td> </tr> </table> </div> <div class="paragraph"> <p><strong>Docker Toolbox</strong> comes with <strong>NO</strong> graphical user interface (GUI). To manage Docker, the included GNU bash of the <strong>Git MSYS-git UNIX tools</strong> shoud be used. A very first version of a (native) Docker UI on Windows is <strong>Kitematic</strong>, currently in a alpha version included.</p> </div> <div id="lb-docker-windows-kinematic-alpha" class="imageblock mb-3"> <div class="title">Docker UI Kinematic on Windows</div> <div class="content"> <a class="notoc" href="/assets/images/collections/blog/series/j1_using_docker/kinematic_alpha.1280x600.png" data-lightbox="collections/blog/series/j1_using_docker/kinematic_alpha.1280x600.png" data-title="Docker UI Kinematic on Windows"> <img class="img-fluid" src="/assets/images/collections/blog/series/j1_using_docker/kinematic_alpha.1280x600.png" alt="Docker UI Kinematic on Windows" width="800"/> </a> </div> </div> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> <td class="content"> You should check <strong>Kitematic</strong>. If started for <strong>Docker Toolbox</strong> on Windows, change (the Hypervisor) to Virtualbox. </td> </tr> </table> </div> <div class="paragraph"> <p>For Windows users a commandline interface to manage a complex system like Docker may sound a bit stone age. It&#8217;s not for good reasons:</p> </div> <div class="ulist"> <ul> <li> <p>the knowlegde of the base Docker commands is essential to understand the Container Technology better</p> </li> <li> <p>Blalal blaaa</p> </li> </ul> </div> </div> </div> <div class="sect1"> <h2 id="manage-linux-on-windows">Manage Linux on Windows</h2> <div class="sectionbody"> <div class="paragraph"> <p>VirtualBox is a greate piece of software for desktop and workstation virtualization. A huge number of IT specialist and developers are using VB for: testing and development environments. Sometimes for production environments – if it&#8217;s applicable.</p> </div> <div class="paragraph"> <p>One good idea for VirtualBox is, if you are Web|App developer for Linux you can keep <strong>Windows</strong> as your primary OS - yeah, yeah those people are living on our planet! One can install a Linux distribution of choice in VirtualBox VM and reap both benefits of Windows as primary OS and Linux as a server platform for good reasons.</p> </div> <div class="sect2"> <h3 id="create-a-linux-vm">Create a Linux VM</h3> <div class="paragraph"> <p>Dolor nisi sed excepturi minima deleniti aspernatur nulla ipsam modi. Fuga tempora laudantium velit quia odit laudantium tempore soluta praesentium facere. Voluptatibus nihil beatae at vitae accusamus nam quis. Fuga itaque ab sunt cupiditate error facere ea quo voluptatibus incidunt eligendi voluptates. Beatae praesentium quasi quidem modi magnam et unde maxime omnis mollitia consequuntur sed dolor.</p> </div> <div class="paragraph"> <p>Nihil consequatur provident eos voluptas porro molestiae id tempora ab alias. Magnam esse vel aut consequuntur vel rerum placeat et. Temporibus qui et non non eos sint vel dolores porro animi libero eos.</p> </div> </div> <div class="sect2"> <h3 id="sharing-data">Sharing Data</h3> <div class="paragraph"> <p>For (real) native Docker installations, it is easy to share data between then host OS and containers managed by Docker. It is simple this:</p> </div> <div class="listingblock"> <div class="content"><pre class="highlight"><code class="language-shell" data-lang="shell"><span id="L1" class="line">docker run <span class="nt">--rm</span> <span class="se">\</span></span>
<span id="L2" class="line">  <span class="nt">--volume</span><span class="o">=</span><span class="nv">$PWD</span>:/srv/jekyll <span class="se">\</span></span>
<span id="L3" class="line">  <span class="nt">-p</span> 35729:35729 <span class="nt">-p</span> 40000:40000 <span class="se">\</span></span>
<span id="L4" class="line">  <span class="nt">-it</span> jekyll-one/j1:latest <span class="se">\</span></span>
<span id="L5" class="line">  j1 serve <span class="nt">--incremental</span> <span class="nt">--livereload</span></span></code></pre></div> </div> <div class="paragraph"> <p>The container, instructed by <code>--volume=$PWD:/srv/jekyll</code> shares the filesystem of the host - the <strong>native</strong> way to bring in data into a container for processing. In the example a static Jekyll Web is created by J1 Template (j1), served by the ports 35729 for livereload and 40000 serving the web.</p> </div> <div class="paragraph"> <p>For the Windows platform, using a virtual Linux Box for Docker containers, this is <strong>NOT</strong> possible. The virtual system is managed by Virtualbox and no direct relationship is in between the VBox and the host operating system Windows! No (direct) access to the host filesystem is possible. Bad luck so far.</p> </div> <div class="paragraph"> <p>Generally spoken, there are 3 ways of sharing files between a Windows host and Linux guest boxes; keep files:</p> </div> <div class="ulist"> <ul> <li> <p>in the guest (Linux) and share them with host through Samba</p> </li> <li> <p>on host (Windows) and use VirtualBox <strong>Shared Folders</strong></p> </li> <li> <p>on host (Windows) and mount Windows <strong>Public Folders</strong> via CIFS from within guest (Linux)</p> </li> </ul> </div> <div class="paragraph"> <p>For all people experienced on the Linux platform, the first option is probably the easiest. But it has it’s drawbacks. In most cases for testing, it&#8217;s <strong>NOT</strong> wanted to keep files in a VM. In case of corruption of the VM, reinstallation needs, or whatever yor data is <strong>lost</strong> in most cases. Truly, not an option.</p> </div> <div class="paragraph"> <p>Typically developers want them kept on native Windows <strong>disks</strong> as they are expected as more safely stored on physical devices and easier to backup. So first option is clearly out.</p> </div> <div class="paragraph"> <p><strong>Shared Folders</strong> are really a great idea. After installing the <strong>VirtualBox Guest Additions</strong> (which brings the mount.vboxsf binary and vboxsf kernel module) the guest can mount automatically a Windows OS folder inside the VM. Some klicks further the guest start&#8217;s, mount the <strong>shared folder</strong> in guest and voila: you&#8217;re done! Sounds really great.</p> </div> <div class="paragraph"> <p>But there&#8217;s a catch – performance. Shared Folders are really, really horrible slow. Which in turn kills the idea of programming and testing code without loosing hair because of the slowness. You can find tons of articles around slow shared folders on the Internet; both for the Big Dogs: VMware and VirtualBox. But no solution. Since decades.</p> </div> <div class="paragraph"> <p>Analyzing the performance, it&#8217;s obvious that kernel spends really large amount of time in IO mode – so the vboxsf CIFS emulation of VirtualBoxis behaving something like a slug. Birds love slugs but IT professionals don’t like that, do they?</p> </div> <div class="paragraph"> <p>It seems that the only viable solution is sharing folders though Windows and mounting them via CIFS on the guest, the virtual Linux box. This way, a similiar flexible solution for sharing folders can be achived but at a much better performance.</p> </div> </div> <div class="sect2"> <h3 id="performance-tests">Performance tests</h3> <div class="paragraph"> <p>Anyway, <strong>shared folders</strong> will be always slow as the are of type <strong>NAS</strong> - network attached storage. For a local network nowadays, typically at Gigabit level and quite low in latency, an acceptable performance cab be achived.</p> </div> <div class="paragraph"> <p>I did some simple tests to show the performance differences. There are three directories I did for my tests:</p> </div> <div class="ulist"> <ul> <li> <p>/mnt/media/repo1, data on a physical (local) disk on the host</p> </li> <li> <p>/mnt/media/repo2, data on a physical (local) disk in the guest</p> </li> <li> <p>/mnt/media/repo3, data on a Windows share mounted via cifs in the guest</p> </li> </ul> </div> <div class="paragraph"> <p>I&#8217;ve been using simple (bash) script based on <strong>dd</strong> commands for testing. The <strong>dd</strong> commands used as a base are shown below. For sure not a quite sophisticated test scenario but it&#8217;s giving a general impression what can achived in real world.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> For multi-platform testing, on Windows the <code>dd</code> command is used as well. For <strong>Docker Toolbox</strong>, beside the GNU bash, a full set of <strong>GNU CoreUtils</strong> are available as well (accessible out of the <strong>Docker Quickstart Terminal</strong>). The used (bash) test script needs to be run out of <strong>Docker Quickstart Terminal</strong>. Download the tester script from here. </td> </tr> </table> </div> <div class="paragraph"> <p>The test script <strong>docker_perf_test.sh</strong> supports a test scenario for <strong>General System Performance</strong>. This is focussing on pure CPU|Memory power. On both systems (host and guest) these tests are using pure <strong>kernel services</strong> for creating input and output data. One is creating random input data as fast as possible, the other discards everything it gets as fast as it can.</p> </div> <div class="listingblock"> <div class="title">General System Performance</div> <div class="content"><pre class="highlight"><code class="language-shell" data-lang="shell"><span id="L1" class="line"><span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/dev/urandom <span class="nv">of</span><span class="o">=</span>/dev/null <span class="nv">bs</span><span class="o">=</span>1M <span class="nv">count</span><span class="o">=</span>10000</span></code></pre></div> </div> <div class="paragraph"> <p>Please see those tests for <strong>General System Performance</strong> for the background <strong>What could be achived in therory</strong>. These tests may helpful to compare your current setup for the host and the guest same way.</p> </div> <div class="paragraph"> <p>As mentioned, all tests for <strong>docker_perf_test.sh</strong> are based on the <code>dd</code> command. For <strong>real world</strong> measures, standard <strong>dd tests</strong> are used. You&#8217;ll find a lot of those on the Internet. All tests for <strong>docker_perf_test.sh</strong> are changed (from <code>/dev/zero</code>) to <code>/dev/urandom</code> for the input to put some <strong>pressure</strong> on the CPU while processing data for reading or writing from the filesystem to be checked. All the tests are <strong>rules of thumb</strong>, no technical measures.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Zum Messen der Schreibperformance liest man die zu Schreibenden Daten am besten aus /dev/zero und schreibt eine normale Datei im Filesystem (z.B. mit of=/root/testfile). Die folgenden Beispiele verwenden ein Testdatei, um irrtümlichen Datenverlust zu vermeiden. Die dabei erzielbare Performance Werte sind etwas geringer (da dadurch auch Metadaten im Filesystem geschrieben werden). </td> </tr> </table> </div> <div class="paragraph"> <p>Find the base <code>dd</code> commands for read an write performance tests below. The exported shared folder on Windows is <strong>C:\Users\Public</strong> mapped to the Unix (POSIX) folder scheme of <strong>/c/Users/Public</strong> on the guest OS.</p> </div> <div class="listingblock"> <div class="title">Write Performance - Windows host (local disk), Linux guest (shared disk)</div> <div class="content"><pre class="highlight"><code class="language-shell" data-lang="shell"><span id="L1" class="line"><span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/dev/urandom <span class="nv">bs</span><span class="o">=</span>1M <span class="nv">count</span><span class="o">=</span>1024 | <span class="nb">split</span> <span class="nt">-b</span> 1M - name.</span></code></pre></div> </div> <div class="listingblock"> <div class="title">Write Performance (local disk), Linux guest</div> <div class="content"><pre class="highlight"><code class="language-shell" data-lang="shell"><span id="L1" class="line"><span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/dev/urandom <span class="nv">of</span><span class="o">=</span>/var/tmp/test/samplefile <span class="nv">bs</span><span class="o">=</span>1M <span class="nv">count</span><span class="o">=</span>1024</span></code></pre></div> </div> <div class="listingblock"> <div class="title">Read Performance - Windows host (local disk), Linux guest (shared disk)</div> <div class="content"><pre class="highlight"><code class="language-shell" data-lang="shell"><span id="L1" class="line"><span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/c/Users/Public/test/samplefile <span class="nv">of</span><span class="o">=</span>/dev/null <span class="nv">bs</span><span class="o">=</span>1M <span class="nv">count</span><span class="o">=</span>1024 <span class="nv">iflag</span><span class="o">=</span>direct</span></code></pre></div> </div> <div class="listingblock"> <div class="title">Read Performance (local disk), Linux guest</div> <div class="content"><pre class="highlight"><code class="language-shell" data-lang="shell"><span id="L1" class="line"><span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/var/tmp/test/samplefile <span class="nv">of</span><span class="o">=</span>/dev/null <span class="nv">bs</span><span class="o">=</span>1M <span class="nv">count</span><span class="o">=</span>1024 <span class="nv">iflag</span><span class="o">=</span>direct</span></code></pre></div> </div> <div class="paragraph"> <p>Have a look at the table below for the measures found on a <strong>Windows 10</strong> desktop host (Intel Core Quad Q9550) using a <strong>SATA-300</strong> disk for the local physical disk and a Gigabit network interface (<strong>Realtek PCIe GBE</strong> familiy) running a <strong>CentOS 7 Linux</strong> (version 3.10.0-862) as a guest:</p> </div> <table class="tableblock frame-all grid-all stretch table-responsive, full-width"> <caption class="title">Table 1. Data transfer rates for 1 GB of data</caption> <colgroup> <col style="width: 18.1818%;"> <col style="width: 18.1818%;"> <col style="width: 36.3636%;"> <col style="width: 27.2728%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">direction</th> <th class="tableblock halign-left valign-top">mountpoint</th> <th class="tableblock halign-left valign-top">source</th> <th class="tableblock halign-left valign-top">througput [MB/s]</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>read</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">/mnt/media/repo1</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">physical (local) disk on the <strong>host</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">85.20</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>read</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">/mnt/media/repo2</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">physical (local) disk on the <strong>guest</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">147.00</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>read</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">/mnt/media/repo3</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">shared disk on the <strong>guest</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">30.3</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>write</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">/mnt/media/repo1</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">physical (local) disk on the <strong>host</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">234.00</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>write</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">/mnt/media/repo2</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">physical (local) disk on the <strong>guest</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">34.00</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>write</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">/mnt/media/repo3</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">shared disk on the <strong>guest</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">39.9</p></td> </tr> </tbody> </table> <div class="admonitionblock warning"> <table> <tr> <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> <td class="content"> Bei Verwendung von if=/dev/zero und bs=1G benötigt das Linuxsystem 1GB freien Platz im RAM. Falls Ihr Testsystem nicht ausreichend RAM &#8230;&#8203; </td> </tr> </table> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Um praxisnahe Ergebnisse zu erhalten empfehlen wir die beschrieben Tests mehrmals (z.B. 3 bis 10x) durchzuführen. Damit können Sie Ausreißer rechtzeitig erkennen. </td> </tr> </table> </div> <div class="paragraph"> <p>Laboriosam eligendi dolorem earum iusto et occaecati dolor mollitia sint quo cumque. Minus nesciunt vero natus alias doloremque deserunt totam quaerat aut excepturi. Saepe sed quam mollitia aut consectetur odio nemo. Omnis sit voluptates est libero officiis eius suscipit ad voluptas nemo animi consequuntur reiciendis. Ut harum distinctio ut et itaque cumque est vero in dolores itaque ut a.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="publish-a-shared-folder">Publish a Shared Folder</h2> <div class="sectionbody"> <div class="paragraph"> <p>Rerum perspiciatis consequatur eveniet. Neque qui adipisci et aut vel quos. Quam id voluptas sed eos dolorem. Quis ea sint error voluptas reprehenderit enim quia repellendus est fugiat dolores accusantium voluptates. Et sed corporis eum veritatis repudiandae.</p> </div> <div class="paragraph"> <p>Consequatur ratione id expedita est et et voluptates commodi aut beatae laboriosam. Asperiores aliquid ut iste adipisci rem et reiciendis dicta distinctio aut molestiae. Optio quis tenetur eos nam quasi eum distinctio id.</p> </div> </div> </div> <div class="sect1"> <h2 id="mount-shared-folders-on-linux">Mount Shared Folders on Linux</h2> <div class="sectionbody"> <div class="paragraph"> <p>Provident vitae quia numquam recusandae reiciendis aut iure id. Deleniti enim aut quo qui aspernatur laudantium quis corporis cum velit modi. Ab at fugiat sed et accusamus earum rerum ut et unde fuga quo nemo odio. Sed quos sed quia quia voluptas cupiditate eveniet eos nisi aut placeat ducimus. Dolorum tempore numquam quasi delectus qui accusamus.</p> </div> <div class="sect2"> <h3 id="installing-cifs">Installing CIFS</h3> <div class="paragraph"> <p>For the Linux VM, a current Ubunt Server of version 18.06 is used. To mount CIFS shares, the package <code>cifs-utils</code> needs to be installed:</p> </div> <div class="listingblock"> <div class="content"><pre class="highlight"><code class="language-shell" data-lang="shell"><span id="L1" class="line"><span class="nb">sudo </span>apt-get <span class="nt">-y</span> <span class="nb">install </span>cifs-utils</span></code></pre></div> </div> <div class="paragraph"> <p>Mounting filesystems in general, therefor the same to the CIFS share, are done as root. This ends up in the situation this folder cannot (accessed??) written as normal user.</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Create the <code>cifs</code> group</p> <div class="listingblock"> <div class="content"><pre class="highlight"><code class="language-shell" data-lang="shell"><span id="L1" class="line"><span class="nb">sudo </span>groupadd cifs</span></code></pre></div> </div> </li> </ol> </div> <div class="olist arabic"> <ol class="arabic" start="2"> <li> <p>Add your user to the <code>cifs</code> group</p> <div class="listingblock"> <div class="content"><pre class="highlight"><code class="language-shell" data-lang="shell"><span id="L1" class="line"><span class="nb">sudo </span>usermod <span class="nt">-aG</span> cifs <span class="nv">$USER</span></span></code></pre></div> </div> </li> </ol> </div> <div class="olist arabic"> <ol class="arabic" start="3"> <li> <p>Create the mountpoint (to be used by Docker) as root</p> <div class="listingblock"> <div class="content"><pre class="highlight"><code class="language-shell" data-lang="shell"><span id="L1" class="line"><span class="nb">mkdir</span> <span class="nt">-p</span> /c/Users/Public</span></code></pre></div> </div> </li> </ol> </div> <div class="olist arabic"> <ol class="arabic" start="4"> <li> <p>Change the ownership of the mountpoint</p> <div class="listingblock"> <div class="content"><pre class="highlight"><code class="language-shell" data-lang="shell"><span id="L1" class="line"><span class="nb">chown</span> <span class="nt">-R</span> root:cifs  /c/Users/Public</span></code></pre></div> </div> </li> </ol> </div> <div class="olist arabic"> <ol class="arabic" start="5"> <li> <p>Create a credentials file to place user|password data safe.</p> <div class="listingblock"> <div class="content"><pre class="highlight"><code class="language-shell" data-lang="shell"><span id="L1" class="line"><span class="nb">touch</span> ~/.smbcredentials</span></code></pre></div> </div> </li> </ol> </div> <div class="listingblock"> <div class="title">smbcredentials</div> <div class="content"><pre>username=&lt;your_windows_user&gt;
password=&lt;windows_user_password&gt;</pre></div> </div> </div> <div class="sect2"> <h3 id="mount-the-share-manually">Mount the share manually</h3> <div class="paragraph"> <p>To enable non-authorized users to read and write the shared files, specify user and group ID that the mounted shares folders should use. This would allow particular users and group members to read|write to the share.</p> </div> <div class="paragraph"> <p>To do so, the following options are used for a public mount:</p> </div> <div class="ulist"> <ul> <li> <p>username</p> </li> <li> <p>password</p> </li> <li> <p>uid</p> </li> <li> <p>gid</p> </li> </ul> </div> <div class="paragraph"> <p>Add the Windows host IP address to the hosts file</p> </div> <div class="paragraph"> <div class="title">/etc/hosts</div> <p>&lt;ip_v4_address&gt; &lt;name_of_the windows_box&gt; &lt;alias_name&gt;</p> </div> </div> <div class="sect2"> <h3 id="mount-the-share-at-boot-time">Mount the share at boot-time</h3> <div class="paragraph"> <p>Et necessitatibus modi in nulla. Ut in quas nisi sit voluptas sequi architecto et. Cum iste illum sequi quia est expedita possimus ullam consequuntur.</p> </div> <div class="paragraph"> <div class="title">/etc/fstab</div> <p>&#47;&#47;win10pc/Public /c/Users/Public cifs uid=1000,gid=5555,credentials=/home/jadams/.smbcredentials,iocharset=utf8,rw 0 0</p> </div> </div> </div> </div> </main> </div> </main> </div> </div> </div> <footer id="exception_container" class="container-fluid no-padding"></footer> <footer id="j1_footer" class=""></footer> <script> $(document).ready(function() { var logger = log4javascript.getLogger("j1.module_loader"); var log_text = 'template core is being initialized'; logger.info(log_text); var settings = $.extend({}, {"layout": "post", "scrollbar": "false", "toc": "true", "comments": "false"}); var interval_count = 0; var max_count = 50; var dependencies_met_core = setInterval(function() { interval_count += 1; if ( j1.adapter.logger.getState() == 'finished' ) { j1.init(settings); logger.info('dependencies of module core met for: logger'); logger.debug('dependencies of module core met after: ' + interval_count * 25 + ' ms'); clearInterval(dependencies_met_core); } if (interval_count > max_count) { logger.warn('dependency check failed for module: core'); clearInterval(dependencies_met_core); logger.warn('run initializer core unchecked for: logger'); j1.init(settings); } }, 25); }); </script> <script> $(document).ready(function() { var logger = log4javascript.getLogger("j1.module_loader"); var log_text = 'module logger is being initialized'; logger.info(log_text); j1.adapter.logger.init(); }); </script> <script> $(document).ready(function() { var logger = log4javascript.getLogger("j1.module_loader"); var log_text = 'module attic is being initialized'; logger.info(log_text); var settings = $.extend({}, {"padding_top":400, "padding_bottom":50, "opacity":0.5, "slides":[{"url":"/assets/images/modules/attics/banner/docker-1280x600-bw.jpg", "alt":"docker_banner_r-1280x500-bw"}]}, {"layout": "post", "scrollbar": "false", "toc": "true", "comments": "false"}); j1.adapter.attic.init(settings); }); </script> <script> $(document).ready(function() { var logger = log4javascript.getLogger("j1.module_loader"); var log_text = 'module themer is being initialized'; logger.info(log_text); var interval_count = 0; var max_count = 50; var dependencies_met_themer = setInterval(function() { interval_count += 1; if ( j1.adapter.logger.getState() == 'finished' ) { j1.adapter.themer.init(); logger.info('dependencies of module themer met for: logger'); logger.debug('dependencies of module themer met after: ' + interval_count * 25 + ' ms'); clearInterval(dependencies_met_themer); } if (interval_count > max_count) { logger.warn('dependency check failed for module: themer'); clearInterval(dependencies_met_themer); logger.warn('run initializer themer unchecked for: logger'); j1.adapter.themer.init(); } }, 25); }); </script> <script> $(document).ready(function() { var logger = log4javascript.getLogger("j1.module_loader"); var log_text = 'module navigator is being initialized'; logger.info(log_text); var interval_count = 0; var max_count = 50; var dependencies_met_navigator = setInterval(function() { interval_count += 1; if ( j1.adapter.themer.getState() == 'finished' ) { j1.adapter.navigator.init(); logger.info('dependencies of module navigator met for: themer'); logger.debug('dependencies of module navigator met after: ' + interval_count * 25 + ' ms'); clearInterval(dependencies_met_navigator); } if (interval_count > max_count) { logger.warn('dependency check failed for module: navigator'); clearInterval(dependencies_met_navigator); logger.warn('run initializer navigator unchecked for: themer'); j1.adapter.navigator.init(); } }, 25); }); </script> <script> $(document).ready(function() { var logger = log4javascript.getLogger("j1.module_loader"); var log_text = 'module toccer is being initialized'; logger.info(log_text); var settings = $.extend({}, {"collapseDepth":3}, {"layout": "post", "scrollbar": "false", "toc": "true", "comments": "false"}); var interval_count = 0; var dependencies_met_toccer = setInterval(function() { var max_count = 50; interval_count += 1; if ( j1.adapter.navigator.getState() == 'finished' ) { j1.adapter.toccer.init( settings ); logger.info('dependencies of module toccer met for: navigator'); logger.debug('dependencies of module toccer met after: ' + interval_count * 25 + ' ms'); clearInterval(dependencies_met_toccer); } if (interval_count > max_count) { logger.warn('dependency check failed for module: toccer'); clearInterval(dependencies_met_toccer); logger.warn('run initializer toccer unchecked for: navigator'); j1.adapter.toccer.init(settings); } }, 25); }); </script> <script> $(document).ready(function() { var logger = log4javascript.getLogger("j1.module_loader"); var log_text = 'module quicksearch is being initialized'; logger.info(log_text); j1.adapter.searcher.init(); }); </script> <script> $(document).ready(function() { var logger = log4javascript.getLogger("j1.module_loader"); var log_text = 'module cookie consent is being initialized'; logger.info(log_text); var interval_count = 0; var max_count = 50; var dependencies_met_cookie_consent = setInterval(function() { interval_count += 1; if ( j1.adapter.logger.getState() == 'finished' ) { j1.adapter.cookie_consent.init(); logger.info('dependencies of module cookie_consent met for: logger'); logger.debug('dependencies of module cookie_consent met after: ' + interval_count * 25 + ' ms'); clearInterval(dependencies_met_cookie_consent); } if (interval_count > max_count) { logger.warn('dependency check failed for module: cookie_consent'); clearInterval(dependencies_met_cookie_consent); logger.warn('run initializer cookie_consent unchecked for: logger'); j1.adapter.cookie_consent.init(); } }, 25); }); </script> <script> $(document).ready(function() { var logger = log4javascript.getLogger("j1.module_loader"); var log_text = 'module ssm is being initialized'; logger.info(log_text); var settings = $.extend({}, {"layout": "post", "scrollbar": "false", "toc": "true", "comments": "false"}); j1.adapter.ssm.init(settings); }); </script> <script> $(document).ready(function() { var logger = log4javascript.getLogger("j1.module_loader"); var log_text = 'theme rouge is being initialized'; logger.info(log_text); }); </script> <script> $(document).ready(function() { var logger = log4javascript.getLogger("j1.module_loader"); var log_text = 'iconify framework is being initialized'; logger.info(log_text); }); </script> <script> $(document).ready(function() { var logger = log4javascript.getLogger("j1.module_loader"); var log_text = 'module mmenu is being initialized'; logger.info(log_text); j1.adapter.mmenu.init(); }); </script> </div> </body> <div id="cookie_consent_modals"></div> <div class="modal fade right" id="fluidModalRTextResizer" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog modal-side modal-top-right modal-notify modal-success" role="document"> <div class="modal-content"> <div class="modal-header"> <p class="lead">Text Resizer</p> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <i class="mdi mdi-close mdi-dark mdi-48px"></i> </button> </div> <div class="modal-body"> <div class="text align-left"> <p> Change the text size for the main window by the switches from below: </p> </div> <div class="ml-3 mt-5 mb-5"> <div class="switch"> <label> <input id="textsize-300" name="textsize-300" type="checkbox" checked> 300 - Default Size </label> </div> <div class="switch"> <label> <input id="textsize-400" name="textsize-400" type="checkbox"> 400 - Larger Size </label> </div> <div class="switch"> <label> <input id="textsize-500" name="textsize-500" type="checkbox"> 500 - Largest Size </label> </div> </div> </div> </div> </div> <script> $(function() { $('[data-toggle="tooltip"]').tooltip(); $('[data-toggle="popover"]').popover(); }); </script> </html>

    
    
